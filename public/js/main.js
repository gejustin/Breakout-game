define("app/tools/physics",[],function(){var e={calculateVelocity:function(e,t,n){return t==="X"?e*Math.cos(n*(Math.PI/180)):-e*Math.sin(n*(Math.PI/180))},calcuateAngle:function(e,t){var n=e.entities.player.X+e.entities.player.width/2,r=e.entities.player.width/2,i,s;return t.boundary.right>=e.entities.player.X&&t.position.X<=n?(i=n-t.position.X,s=Math.acos(i/r)*(180/Math.PI),s>5?180-s:170):(i=t.position.X-n,s=Math.acos(i/r)*(180/Math.PI),s>5?s:10)}};return e}),define("app/tools/gameStatus",[],function(){var e={MENU:0,PLAYING:1,PAUSED:2,GAME_OVER_WON:3,GAME_OVER_LOST:4};return e}),define("app/tools/maths",[],function(){var e={intersection:function(e,t,n){var r=1,i=-2*e.position[n],s=Math.pow(e.position[n],2)+Math.pow(t,2)-2*t*e.position[n]+Math.pow(e.position[n],2)-Math.pow(e.radius,2);return Math.pow(i,2)-4*r*s>=0?!0:!1}};return e}),define("app/tools/collisions",["app/tools/maths"],function(e){var t={hitBottom:function(t,n){return e.intersection(t,n.boundary.bottom,"Y")&&t.boundary.right>=n.boundary.left&&t.boundary.left<=n.boundary.right},hitTop:function(t,n){return e.intersection(t,n.boundary.top,"Y")&&t.boundary.right>=n.boundary.left&&t.boundary.left<=n.boundary.right},hitLeft:function(t,n){return e.intersection(t,n.boundary.left,"X")&&t.boundary.top<=n.boundary.bottom&&t.boundary.bottom>=n.boundary.top},hitRight:function(t,n){return e.intersection(t,n.boundary.right,"X")&&t.boundary.top<=n.boundary.bottom&&t.boundary.bottom>=n.boundary.top}};return t}),define("app/objects/ball",["app/tools/physics","app/tools/gameStatus","app/tools/maths","app/tools/collisions"],function(e,t,n,r){var i=function(e,t,n,r,i,s){this.position={X:e,Y:t},this.radius=n,this.velocity={magnitude:r,angle:null,X:0,Y:6},this.fillColor=i,this.strokeColor=s};return i.prototype=function(){var n=function(){this.velocity.X=e.calculateVelocity(this.velocity.magnitude,"X",this.velocity.angle),this.velocity.Y=e.calculateVelocity(this.velocity.magnitude,"y",this.velocity.angle)},i=function(e,t,n,r){switch(t){case"right":this.position.X=e.boundary.right-(this.radius+n);break;case"left":this.position.X=e.boundary.left+this.radius+n;break;case"top":r?this.position.Y=e.boundary.top+this.radius+n:this.position.Y=e.boundary.top-(this.radius+n);break;case"bottom":this.position.Y=e.boundary.bottom+this.radius+n;break;default:}},s=function(e){switch(e){case"right":case"left":this.velocity.angle=180-this.velocity.angle;break;case"top":case"bottom":this.velocity.angle=360-this.velocity.angle;break;default:}},o=function(){this.boundary={right:this.position.X+this.radius,left:this.position.X-this.radius,top:this.position.Y-this.radius,bottom:this.position.Y+this.radius}},u=function(e){var o={};r.hitRight(this,e.canvas)?(o.hit=!0,o.side="right"):r.hitLeft(this,e.canvas)&&(o.hit=!0,o.side="left"),r.hitBottom(this,e.canvas)?(o.hit=!0,o.side="bottom"):r.hitTop(this,e.canvas)&&(o.hit=!0,o.side="top"),o.hit&&(i.call(this,e.canvas,o.side,1,!0),s.call(this,o.side),n.call(this),o.side==="bottom"&&(e.status=t.GAME_OVER_LOST))},a=function(t){var s={};r.hitTop(this,t.entities.player)&&(s.hit=!0,s.side="top",this.velocity.angle=e.calcuateAngle(t,this)),r.hitLeft(this,t.entities.player)?(s.hit=!0,s.side="left",this.velocity.angle=165):r.hitRight(this,t.entities.player)&&(s.hit=!0,s.side="right",this.velocity.angle=15),s.hit&&(i.call(this,t.entities.player,s.side,1),n.call(this))},f=function(e){e.entities.bricks.length===0&&(e.status=t.GAME_OVER_WON);for(var o=e.entities.bricks.length-1;o>=0;o--){var u=e.entities.bricks[o],a={};r.hitRight(this,u)?(a.hit=!0,a.side="right"):r.hitLeft(this,u)&&(a.hit=!0,a.side="left"),r.hitBottom(this,u)?(a.hit=!0,a.side="bottom"):r.hitTop(this,u)&&(a.hit=!0,a.side="top");if(a.hit){i.call(this,u,a.side,1),s.call(this,a.side),n.call(this),e.entities.bricks.splice(o,1);break}}},l=function(e,t){o.call(this),u.call(this,e),a.call(this,e),f.call(this,e),this.position.X+=this.velocity.X*t,this.position.Y+=this.velocity.Y*t},c=function(e){e.ctx.fillStyle=this.fillColor,e.ctx.strokeStyle=this.strokeColor,e.ctx.beginPath(),e.ctx.arc(this.position.X,this.position.Y,this.radius,0,2*Math.PI,!0),e.ctx.stroke(),e.ctx.fill(),e.ctx.closePath()};return{draw:c,update:l}}(),i}),define("app/objects/brick",[],function(){var e=function(e,t,n,r,i,s){this.X=e,this.Y=t,this.height=r,this.width=n,this.boundary={right:this.X+this.width,left:this.X,top:this.Y,bottom:this.Y+this.height},this.fillColor=i,this.strokeColor=s};return e.prototype=function(){var e=function(){},t=function(e){e.ctx.beginPath(),e.ctx.fillStyle=this.fillColor,e.ctx.strokeStyle=this.strokeColor,e.ctx.rect(this.X,this.Y,this.width,this.height),e.ctx.fill(),e.ctx.stroke(),e.ctx.closePath()};return{draw:t,update:e}}(),e}),define("app/objects/paddle",[],function(){var e=function(e,t,n,r,i,s,o){this.X=e,this.Y=t,this.height=r,this.width=n,this.velocity=i,this.fillColor=s,this.strokeColor=o,this.keyState={},this.boundary={right:this.X+this.width,left:this.X,top:this.Y,bottom:this.Y+this.height},this.init()};return e.prototype=function(){var e=function(e,r){s.call(this),t.call(this,r),n.call(this,e)},t=function(e){this.keyState[37]&&(this.X-=this.velocity*e),this.keyState[39]&&(this.X+=this.velocity*e)},n=function(e){this.X<=e.canvas.boundary.left?this.X=e.canvas.boundary.left:this.X+this.width>=e.canvas.boundary.right&&(this.X=e.canvas.boundary.right-this.width)},r=function(e){e.ctx.beginPath(),e.ctx.fillStyle=this.fillColor,e.ctx.strokeStyle=this.strokeColor,e.ctx.fillRect(this.X,this.Y,this.width,this.height),e.ctx.strokeRect(this.X,this.Y,this.width,this.height),e.ctx.closePath()},i=function(){var e=this;window.addEventListener("keydown",function(t){if(t.keyCode===37||t.keyCode===39)t.preventDefault(),e.keyState[t.keyCode]=!0},!1),window.addEventListener("keyup",function(t){t.preventDefault(),delete e.keyState[t.keyCode]},!1)},s=function(){this.boundary={right:this.X+this.width,left:this.X,top:this.Y,bottom:this.Y+this.height}};return{update:e,draw:r,init:i}}(),e}),define("app/game",["app/objects/ball","app/objects/brick","app/objects/paddle","app/tools/gameStatus"],function(e,t,n,r){var i=function(){this.entities={}};return i.prototype=function(){var i=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},s=function(){this.ctx.save(),this.entities.ball.draw(this);for(var e=0;e<this.entities.bricks.length;e++)this.entities.bricks[e].draw(this);this.entities.player.draw(this),this.ctx.restore()},o=function(i){a(),this.canvas=document.getElementById(i),this.canvas.boundary={right:this.canvas.width,left:0,top:0,bottom:this.canvas.height},this.ctx=this.canvas.getContext("2d"),this.entities.ball=new e(this.canvas.width/2,550,7,11,"#3B3C42","black"),this.entities.player=new n(this.canvas.width/2-55,730,110,15,11,"#3B3C42","black"),this.entities.bricks=[];for(var s=0;s<14;s++)for(var o=0;o<5;o++)this.entities.bricks.push(new t(s*64+64,o*64+64,62,15,"#3B3C42","black"));this.status=r.PLAYING,this.run()},u=function(){var e=this,t,n=0,i=function(s){t=(s-n)/(1e3/60),n=s,e.clearCanvas(),e.update(t),e.draw();switch(e.status){case r.PLAYING:window.requestAnimFrame(i,canvas);break;case r.GAME_OVER_LOST:alert("You lose, press f5 to reset");break;case r.GAME_OVER_WON:alert("You won!");break;default:}};window.requestAnimFrame(i,canvas)},a=function(){window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()},f=function(e){this.entities.ball.update(this,e);for(var t=0;t<this.entities.bricks.length;t++)this.entities.bricks[t].update(this,e);this.entities.player.update(this,e)};return{clearCanvas:i,draw:s,init:o,run:u,update:f}}(),i}),require(["app/game"],function(e){var t=new e;t.init("canvas")}),define("main",function(){});