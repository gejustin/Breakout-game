define(["app/objects/ball","app/objects/brick","app/objects/paddle","app/tools/gameStatus"],function(e,t,n,r){var i=function(){this.entities={}};return i.prototype=function(){var i=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},s=function(){this.ctx.save(),this.entities.ball.draw(this);for(var e=0;e<this.entities.bricks.length;e++)this.entities.bricks[e].draw(this);this.entities.player.draw(this),this.ctx.restore()},o=function(i){a(),this.canvas=document.getElementById(i),this.canvas.boundary={right:this.canvas.width,left:0,top:0,bottom:this.canvas.height},this.ctx=this.canvas.getContext("2d"),this.entities.ball=new e(this.canvas.width/2,550,7,11,"#3B3C42","black"),this.entities.player=new n(this.canvas.width/2-55,730,110,15,11,"#3B3C42","black"),this.entities.bricks=[];for(var s=0;s<14;s++)for(var o=0;o<5;o++)this.entities.bricks.push(new t(s*64+64,o*64+64,62,15,"#3B3C42","black"));this.status=r.PLAYING,this.run()},u=function(){var e=this,t,n=0,i=function(s){t=(s-n)/(1e3/60),n=s,e.clearCanvas(),e.update(t),e.draw();switch(e.status){case r.PLAYING:window.requestAnimFrame(i,canvas);break;case r.GAME_OVER_LOST:alert("You lose, press f5 to reset");break;case r.GAME_OVER_WON:alert("You won!");break;default:}};window.requestAnimFrame(i,canvas)},a=function(){window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()},f=function(e){this.entities.ball.update(this,e);for(var t=0;t<this.entities.bricks.length;t++)this.entities.bricks[t].update(this,e);this.entities.player.update(this,e)};return{clearCanvas:i,draw:s,init:o,run:u,update:f}}(),i});