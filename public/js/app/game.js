define(["app/objects/ball","app/objects/brick","app/objects/paddle","app/tools/gameStatus","app/objects/level"],function(e,t,n,r,i){var s=function(){this.entities={}};return s.prototype=function(){var e=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},t=function(){this.ctx.save(),this.entities.ball.draw(this);for(var e=0;e<this.entities.bricks.length;e++)this.entities.bricks[e].draw(this);this.entities.player.draw(this),this.ctx.restore()},n=function(e){o(),this.canvas=document.getElementById(e),this.canvas.width=window.innerWidth*.5333333333333333,this.canvas.height=window.innerHeight*.7111111111111111,this.canvas.boundary={right:this.canvas.width,left:0,top:0,bottom:this.canvas.height},this.ctx=this.canvas.getContext("2d"),this.entities.level=new i,this.entities.level.init.call(this),this.status=r.PLAYING,this.run()},s=function(){var e=this,t,n=0,i=function(s){t=(s-n)/(1e3/60),n=s,e.clearCanvas(),e.update(t),e.draw();switch(e.status){case r.PLAYING:window.requestAnimFrame(i,canvas);break;case r.GAME_OVER_LOST:alert("You lose, press f5 to reset");break;case r.GAME_OVER_WON:alert("You won!");break;default:}};window.requestAnimFrame(i,canvas)},o=function(){window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()},u=function(e){this.entities.ball.update(this,e);for(var t=0;t<this.entities.bricks.length;t++)this.entities.bricks[t].update(this,e);this.entities.player.update(this,e)};return{clearCanvas:e,draw:t,init:n,run:s,update:u}}(),s});